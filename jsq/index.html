<!DOCTYPE html>
<html version="2021-12-10">
<head>
  <title>计算器 - JSQ.ONE</title>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <meta id="viewport" name="viewport" content="width=device-width, user-scalable=0, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta name="format-detection" content="telphone=no,email=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <link rel="icon shortcut bookmark" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAq1BMVEUAAABEg/NFhvZEg/Moy7UpzLYpzLcrzrYoy7MqzbcozLVFhfVEhvVGhPVBg/JFhvVFhvZEhPRFhfVCgu9FhfRGhvVEhfVDg/VFhPVFhfREhPRGhfNGhvVFhfQpzLYozLYpzLYpzbcpzLYpzLYpzbcpzLdFhPYpzLcpy7lHiPcqzbgpyLMpzLYpzLYpzLYpzbYpzLYozLYpy7Uqy7UpzLZFhvYnzbdFhfUpzLbDSG+aAAAAN3RSTlMAgL9AgL/UKkBVqt2UFyflu3doEPCDf0jMqnBYUDDx57ecinRqX1VKIh4YDPrezcalkzozrokuNjiCpAAAAzBJREFUeNrt3dly2kAQheEWjBeZJYAh2CzZYxtnj5OM3v/J0oTCRJlRS0oK6FbOf6urrwZJMyqqmhBCCCGE0HG6XC5miZJmi+Xl3yGm3zteWZ3uzYrq1UueeJ11+1QjtQxuPKHKDbzqBlQxdffGn3WoUt5AVKErb6ArKu3am+iaSkq8kSYk1lP83M037jdjQbzvktClmQXhpCW58YYaCpCuN1TL8js9V6/4FvGmmlJRS2+qORW18KYaUVEzb6phrdchKcmHJYDUCBBAAJEDBBBA5AABBJB1ST7aZQzSKvwaAAgggAACCCCAcIAAAohtSOKr16ag86x6DhBAAAEEEEAAAQQQQI4MaeXLb+PzxSAn1XM4jwACCCCAAAIIIIAAAsg+IO18tMsYpDhAAAFEDhBAAJEDBBBA5OxAziheSkLtOh0G4k7jkjRLJYivXnIQiMuyqOT2fZalhiDs2EoCB0vMQNgRldw+21xIjUDYEZWcs2NTagLCjpwkdLDEAIQdUcnX579fSNVD2BFIQgdLlEPYEZU8sCNfqhrCjqjk4UN4IdUMKZD8YIetFSmQnGZBb5XfI1FJzKH+qRWVhA4D75EqkjdUAEmqd7C9VrnDwMHKlTtsQETJa1pnBEKuzGEFQq7EYQZCTv4Dnx0IOclhCJLbl4TnEzMQdsT6eEebrEA2jrqSdqt6yUEg7Cjq052h71qCgyX3ZiDskDq5NwIJHKHEBIQdZb14ZwASOOIS9ZCYw8UkyiFRB0Uk3/4V8nQvENlB9CoLulC9IgyJOKKSC9UrwpLQEZVc6P5pBRJH277kHeqfWiwJHKGEHdpXZCMJHdxLwVF/97t/CEsCx1aSd6g/j7Bk6wglW4cFyEbiKOzzzmECwpKogyWPDhsQOnMU79FhBFIWIIAAIgcIIIDIAQIIIHKAAAKIHCCANHIgV2NGpDVmaF1jxgg2ZrCjrVGbg6YMPx0JkJU31IqaMca1S1L9sTfSuE9iE2+kifGx/9sGDRj8v67zP43+NzD8/4p+ZX78/zVVLlE8p308oRr11FK6fapXb6TwQdwaCgzBMp2PhomShqP5tEcIIYQQQugY/QRWUvD5LMhU/QAAAABJRU5ErkJggg==">
  <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAq1BMVEUAAABEg/NFhvZEg/Moy7UpzLYpzLcrzrYoy7MqzbcozLVFhfVEhvVGhPVBg/JFhvVFhvZEhPRFhfVCgu9FhfRGhvVEhfVDg/VFhPVFhfREhPRGhfNGhvVFhfQpzLYozLYpzLYpzbcpzLYpzLYpzbcpzLdFhPYpzLcpy7lHiPcqzbgpyLMpzLYpzLYpzLYpzbYpzLYozLYpy7Uqy7UpzLZFhvYnzbdFhfUpzLbDSG+aAAAAN3RSTlMAgL9AgL/UKkBVqt2UFyflu3doEPCDf0jMqnBYUDDx57ecinRqX1VKIh4YDPrezcalkzozrokuNjiCpAAAAzBJREFUeNrt3dly2kAQheEWjBeZJYAh2CzZYxtnj5OM3v/J0oTCRJlRS0oK6FbOf6urrwZJMyqqmhBCCCGE0HG6XC5miZJmi+Xl3yGm3zteWZ3uzYrq1UueeJ11+1QjtQxuPKHKDbzqBlQxdffGn3WoUt5AVKErb6ArKu3am+iaSkq8kSYk1lP83M037jdjQbzvktClmQXhpCW58YYaCpCuN1TL8js9V6/4FvGmmlJRS2+qORW18KYaUVEzb6phrdchKcmHJYDUCBBAAJEDBBBA5AABBJB1ST7aZQzSKvwaAAgggAACCCCAcIAAAohtSOKr16ag86x6DhBAAAEEEEAAAQQQQI4MaeXLb+PzxSAn1XM4jwACCCCAAAIIIIAAAsg+IO18tMsYpDhAAAFEDhBAAJEDBBBA5OxAziheSkLtOh0G4k7jkjRLJYivXnIQiMuyqOT2fZalhiDs2EoCB0vMQNgRldw+21xIjUDYEZWcs2NTagLCjpwkdLDEAIQdUcnX579fSNVD2BFIQgdLlEPYEZU8sCNfqhrCjqjk4UN4IdUMKZD8YIetFSmQnGZBb5XfI1FJzKH+qRWVhA4D75EqkjdUAEmqd7C9VrnDwMHKlTtsQETJa1pnBEKuzGEFQq7EYQZCTv4Dnx0IOclhCJLbl4TnEzMQdsT6eEebrEA2jrqSdqt6yUEg7Cjq052h71qCgyX3ZiDskDq5NwIJHKHEBIQdZb14ZwASOOIS9ZCYw8UkyiFRB0Uk3/4V8nQvENlB9CoLulC9IgyJOKKSC9UrwpLQEZVc6P5pBRJH277kHeqfWiwJHKGEHdpXZCMJHdxLwVF/97t/CEsCx1aSd6g/j7Bk6wglW4cFyEbiKOzzzmECwpKogyWPDhsQOnMU79FhBFIWIIAAIgcIIIDIAQIIIHKAAAKIHCCANHIgV2NGpDVmaF1jxgg2ZrCjrVGbg6YMPx0JkJU31IqaMca1S1L9sTfSuE9iE2+kifGx/9sGDRj8v67zP43+NzD8/4p+ZX78/zVVLlE8p308oRr11FK6fapXb6TwQdwaCgzBMp2PhomShqP5tEcIIYQQQugY/QRWUvD5LMhU/QAAAABJRU5ErkJggg==">
  <style type="text/css">
    html{font-size:100px;height:100%;background-color:#000;}
    body{background-color:#000;margin:0;padding:0;height:100%;
      scroll-behavior:smooth;
      user-select:none;
      -webkit-user-select:none;
      -webkit-touch-callout:none;
      -webkit-overflow-scrolling:touch;
      -webkit-font-smoothing:antialiased;
      -webkit-tap-highlight-color:rgba(255, 255, 255, 0);
      font-size:0.16rem;
    }
    input, select, textarea {user-select:text !important;outline:medium;}
    input[type=text], input[type=tel], input[type=password], input[type=search] {-webkit-appearance: none;}
    @keyframes hobbit_startup_loading{0%{visibility:visible;transform:rotate(0)}100%{transform:rotate(360deg)}}
    #hobbit_loading{display:block;position:relative;top:50%;margin:-50px auto;width:100px;height:100px}
    #hobbit_loading::before,#hobbit_loading::after{content:'';position:absolute;border-radius:50%;border:2px solid #fff;box-sizing:border-box;visibility:hidden;animation:hobbit_startup_loading 1s linear 1s infinite}
    body.-error-::before{content:'Network error,click to reload';position:absolute;display:block;top:0;bottom:0;left:0;right:0;margin:auto;width:300px;height:40px;padding-top:160px;background:url(//s.vipkidstatic.com/fe-static/hobbit/asset/res/image/error-v4.png) no-repeat center top;background-size:100%;font-size:24px;text-align:center;cursor:pointer}
    body.-error- #hobbit_loading,body.-ready- #hobbit_loading,.-seo-{display:none}
    #hobbit_loading::before{border-color:#df1317 transparent;width:80%;height:80%;top:10%;left:10%}
    #hobbit_loading::after{border-color:transparent #e4934b;width:60%;height:60%;top:20%;left:20%;animation-direction:reverse}
    #hobbit_app{display:none;height:100%;position:fixed;top:0;left:0;right:0;width:100%;}
    body.-ready- #hobbit_app{
      display: flex;
      flex-direction: column;
      font-family: Menlo, Monaco, monospace;
    }
    .code {
      flex: auto;
      background-color: #000;
      color: #fff;
      font-size: 0.24rem;
      padding: 0.1rem;
      display: block;
      width: 100%;
      border: 1px dashed #fff;
      border-bottom: 0;
      box-sizing: border-box;
      resize: none;
    }
    .result {
      flex: 0 0 1.2rem;
      border: 1px dashed #fff;
      padding: 0.1rem;
      box-sizing: border-box;
      display: flex;
      overflow: auto;
    }
    .result .value {
      flex: auto;
      font-size: 0.24rem;
      background-color: #000;
      padding: 0;
      color: #fff;
      border: 0;
      margin-right: 0.1rem;
      overflow: auto;
      resize: none;
    }
    .result .run {
      flex: 0 0 1rem;
      text-align: center;
      border: 1px solid #fff;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.5rem;
      cursor: pointer;
    }
    .result .run .running {
      pointer-events: none;
      cursor: progress;
      border-color: #ff0;
    }
    .operate {
      flex: 0 0 2.85rem;
      text-align: center;
      border: 1px dashed #fff;
      border-top: 0;
      color: #fff;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      justify-content: space-around;
      padding-bottom: 0.1rem;
    }
    .operate b {
      margin: 0.1rem 0.05rem 0;
      color: #fff;
      text-align: center;
      width: 0.5rem;
      height: 0.5rem;
      line-height: 0.51rem;
      border: 1px dashed #fff;
      font-size: 0.24rem;
      font-weight: normal;
      cursor: pointer;
    }
    @media screen and (min-width: 415px) {
      .operate {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div id="hobbit_loading"></div>
  <div id="hobbit_app" @touchmove="e => e.preventDefault()">
    <textarea class="code" v-model="code"
      autofocus
      @keypress="onInputTextKeypress"
      placeholder="输入计算表达式">
    </textarea>
    <section class="result">
      <textarea class="value"
        placeholder="计算结果"
        readonly v-model="value"></textarea>
      <div class="run" :class="{ running }" @click="run">=</div>
    </section>
    <section class="operate">
      <b @touchstart="v('1', $event)">1</b>
      <b @touchstart="v('2', $event)">2</b>
      <b @touchstart="v('3', $event)">3</b>
      <b @touchstart="v('4', $event)">4</b>
      <b @touchstart="v('5', $event)">5</b>
      <b @touchstart="v('6', $event)">6</b>

      <b @touchstart="v('7', $event)">7</b>
      <b @touchstart="v('8', $event)">8</b>
      <b @touchstart="v('9', $event)">9</b>
      <b @touchstart="v('0', $event)">0</b>
      <b @touchstart="v('.', $event)">.</b>
      <b @touchstart="v('\n', $event)">↵</b>
      
      <b @touchstart="v('+', $event)">+</b>
      <b @touchstart="v('-', $event)">-</b>
      <b @touchstart="v('×', $event)">×</b>
      <b @touchstart="v('÷', $event)">÷</b>
      <b @touchstart="v('**', $event)">**</b>
      <b @touchstart="v('%', $event)">%</b>
      
      <b @touchstart="v('π', $event)">π</b>
      <b @touchstart="v('E', $event)">E</b>
      <b @touchstart="v('random()', $event)">R</b>
      <b @touchstart="v('(', $event)">(</b>
      <b @touchstart="v(')', $event)">)</b>
      <b @touchstart="remove">←</b>

      <b @touchstart="v('~', $event)">~</b>
      <b @touchstart="v('^', $event)">^</b>
      <b @touchstart="v('&', $event)">&</b>
      <b @touchstart="v('|', $event)">|</b>
      <b @touchstart="v('!', $event)">!</b>
      <b @touchstart="clear">C</b>
    </section>
  </div>
  <script type="text/javascript">
    (function() {
      var w = window.screen.availWidth || window.screen.width;
      if (w < 640) {
        document.documentElement.style.fontSize = (w / 4) + 'px';
        document.body.className = 'view-m';
      } else if (w <= 1280) {
        document.getElementById('viewport').content = 'width=1280';
      } else if (w > 1920) {
        document.documentElement.style.fontSize = (w / 19.2) + 'px';
      }
      window.setTimeout(function() {
        if (document.body.className.indexOf('-ready-') === -1) {
          document.body.className = '-error-';
          document.body.addEventListener('click', function() {
            window.location.reload();
          });
        }
      }, 1e4);
    })();
  </script>
  <script src="https://lib.baomitu.com/vue/2.6.14/vue.min.js"></script>
  <script>
    window.$hobbit = new Vue({
      el: '#hobbit_app',
      data() {
        return {
          code: '',
          value: '',
          running: false,
        }
      },
      created() {
        document.body.className += ' -ready-';
        const names = Object.getOwnPropertyNames(Math);
        for (const name of names) {
          window[name] = Math[name];
        }
      },
      methods: {
        run(e) {
          e.preventDefault();
          this.running = true;
          let v = null;
          let code = this.code.replace(/[×÷π]/g, c => ({
            '×': '*',
            '÷': '/',
            'π': 'PI',
          })[c]);

          try {
            v = window.eval(code);
          } catch (ex) {
            console.log(ex);
            v = 'Error';
          }
          this.value = v;
          this.running = false;
        },
        onInputTextKeypress(e) {
          if (e.code === 'Enter') {
            if (e.shiftKey || e.ctrlKey) {
              this.run(e);
            }
          }
        },
        v(i, e) {
          this.code += String(i);
          e.preventDefault();
        },
        remove(e) {
          this.code = this.code.substr(0, this.code.length - 1);
          e.preventDefault();
        },
        clear(e) {
          this.code = '';
          this.value = '';
          e.preventDefault();
        },
      },
    })
  </script>
</body>
</html>